/*
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License version 3 {@link http://www.gnu.org/licenses/agpl-3.0.html}
 GNU Affero General Public License - {@link http://www.gnu.org/licenses/agpl.html}
 @example Visit {@link http://github.com/balupton/jquery-lightbox} for more information.
*/
if(typeof window.console!=="object"||typeof window.console.emulated==="undefined"){if(typeof window.console!=="object"||typeof window.console.log!=="function"){window.console={};window.console.log=window.console.debug=window.console.warn=window.console.trace=function(){};window.console.error=function(){alert("An error has occured. Please use another browser to obtain more detailed information.")}}else{if(typeof window.console.debug==="undefined")window.console.debug=function(){for(var a=["console.debug:"],
b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.warn==="undefined")window.console.warn=function(){for(var a=["console.warn:"],b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.error==="undefined")window.console.error=function(){for(var a=["console.error"],b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.trace===
"undefined")window.console.trace=function(){window.console.error.apply(window.console,["console.trace does not exist"])}}window.console.emulated=true}
if(typeof window.console!=="object"||typeof window.console.emulated==="undefined"){if(typeof window.console!=="object"||typeof window.console.log!=="function"){window.console={};window.console.log=window.console.debug=window.console.warn=window.console.trace=function(){};window.console.error=function(){alert("An error has occured. Please use another browser to obtain more detailed information.")}}else{if(typeof window.console.debug==="undefined")window.console.debug=function(){for(var a=["console.debug:"],
b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.warn==="undefined")window.console.warn=function(){for(var a=["console.warn:"],b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.error==="undefined")window.console.error=function(){for(var a=["console.error"],b=0;b<arguments.length;b++)a.push(arguments[b]);window.console.log.apply(window.console,a)};if(typeof window.console.trace===
"undefined")window.console.trace=function(){window.console.error.apply(window.console,["console.trace does not exist"])}}window.console.emulated=true}String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.strip=String.prototype.strip||function(a,b){a=String(a);var c=this;if(a.length){b||0||(a=a.replace(/([\[\]\(\)\^\$\.\?\|\/\\])/g,"\\$1"));c=c.replace(eval("/^"+a+"+|"+a+"+$/g"),"")}return String(c)};
String.prototype.stripLeft=String.prototype.stripLeft||function(a,b){a=String(a);var c=this;if(a.length){b||0||(a=a.replace(/([\[\]\(\)\^\$\.\?\|\/\\])/g,"\\$1"));c=c.replace(eval("/^"+a+"+/g"),"")}return String(c)};String.prototype.stripRight=String.prototype.stripRight||function(a,b){a=String(a);var c=this;if(a.length){b||0||(a=a.replace(/([\[\]\(\)\^\$\.\?\|\/\\])/g,"\\$1"));c=c.replace(eval("/"+a+"+$/g"),"")}return String(c)};
String.prototype.toInt=String.prototype.toInt||function(){return parseInt(this,10)};String.prototype.wrap=String.prototype.wrap||function(a,b){return a+this+b};String.prototype.wrapSelection=String.prototype.wrapSelection||function(a,b,c,d){if(typeof c==="undefined"||c===null)c=this.length;if(typeof d==="undefined"||d===null)d=this.length;return this.substring(0,c)+a+this.substring(c,d)+b+this.substring(d)};
String.prototype.toSlug=String.prototype.toSlug||function(){return this.toLowerCase().replace(/[\s_]/g,"-").replace(/[^-a-z0-9]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")};
String.prototype.queryStringToJSON=String.prototype.queryStringToJSON||function(){var a=String(this);a=a.substring(a.indexOf("?")+1);a=a.replace(/\+/g,"%20");if(a.substring(0,1)==="{"&&a.substring(a.length-1)==="}")return eval(decodeURIComponent(a));a=a.split(/\&(amp\;)?/);for(var b={},c=0,d=a.length;c<d;++c){var e=a[c]||null;if(e!==null){e=e.split("=");if(e!==null){var f=e[0]||null;if(f!==null)if(typeof e[1]!=="undefined"){e=e[1];f=decodeURIComponent(f);e=decodeURIComponent(e);try{e=eval(e)}catch(i){}var g=
f.split(".");if(g.length===1)b[f]=e;else{var h="",j="";$.each(g,function(k,l){h+='["'+l.replace(/"/g,'\\"')+'"]';jsonCLOSUREGLOBAL=b;j="if ( typeof jsonCLOSUREGLOBAL"+h+' === "undefined" ) jsonCLOSUREGLOBAL'+h+" = {}";eval(j);b=jsonCLOSUREGLOBAL;delete jsonCLOSUREGLOBAL});jsonCLOSUREGLOBAL=b;valueCLOSUREGLOBAL=e;j="jsonCLOSUREGLOBAL"+h+" = valueCLOSUREGLOBAL";eval(j);b=jsonCLOSUREGLOBAL;delete jsonCLOSUREGLOBAL;delete valueCLOSUREGLOBAL}}}}}return b};
(function(a){a.fn.binder=a.fn.binder||function(b,c,d){var e=a(this);if(d)e.bind(b,c,d);else{d=c;e.bind(b,d)}return e};a.fn.once=a.fn.once||function(b,c,d){var e=a(this);if(d){e.unbind(b,d);e.bind(b,c,d)}else{d=c;e.unbind(b,d);e.bind(b,d)}return e};a.fn.enter=a.fn.enter||function(b,c){return a(this).binder("enter",b,c)};a.event.special.enter=a.event.special.cancel||{setup:function(){a(this).bind("keypress",a.event.special.enter.handler)},teardown:function(){a(this).unbind("keypress",a.event.special.enter.handler)},
handler:function(b){a(this);if(b.keyCode===13){b.type="enter";a.event.handle.apply(this,[b]);return true}}};a.fn.cancel=a.fn.cancel||function(b,c){return a(this).binder("cancel",b,c)};a.event.special.cancel=a.event.special.cancel||{setup:function(){a(this).bind("keyup",a.event.special.cancel.handler)},teardown:function(){a(this).unbind("keyup",a.event.special.cancel.handler)},handler:function(b){a(this);var c=b.keyCode===27;if((typeof b.DOM_VK_ESCAPE==="undefined"?false:b.DOM_VK_ESCAPE)||c){b.type=
"cancel";a.event.handle.apply(this,[b]);return true}}};a.fn.lastclick=a.fn.lastclick||function(b,c){return a(this).binder("lastclick",b,c)};a.event.special.lastclick=a.event.special.lastclick||{setup:function(){a(this).bind("click",a.event.special.lastclick.handler)},teardown:function(){a(this).unbind("click",a.event.special.lastclick.handler)},handler:function(b){var c=function(){var d=a(this),e=d.data("lastclick-timeout")||false;e&&clearTimeout(e);e=false;d.data("lastclick-timeout",e)};(function(d){var e=
this;c.call(e);var f=a(e);f.data("lastclick-clicks",(f.data("lastclick-clicks")||0)+1);var i=setTimeout(function(){var g=f.data("lastclick-clicks");c.apply(e,[d]);f.data("lastclick-clicks",0);d.type="lastclick";a.event.handle.apply(e,[d,g])},500);f.data("lastclick-timeout",i)}).apply(this,[b])}};a.fn.firstclick=a.fn.firstclick||function(b,c){return a(this).binder("firstclick",b,c)};a.event.special.firstclick=a.event.special.firstclick||{setup:function(){a(this).bind("click",a.event.special.firstclick.handler)},
teardown:function(){a(this).unbind("click",a.event.special.firstclick.handler)},handler:function(b){var c=function(){var d=a(this),e=d.data("firstclick-timeout")||false;e&&clearTimeout(e);e=false;d.data("firstclick-timeout",e)};(function(d){var e=this;c.call(e);var f=a(e);f.data("firstclick-clicks",(f.data("firstclick-clicks")||0)+1);if(f.data("firstclick-clicks")===1){d.type="firstclick";a.event.handle.apply(e,[d])}var i=setTimeout(function(){c.apply(e,[d]);f.data("firstclick-clicks",0)},500);f.data("firstclick-timeout",
i)}).apply(this,[b])}};a.fn.singleclick=a.fn.singleclick||function(b,c){return a(this).binder("singleclick",b,c)};a.event.special.singleclick=a.event.special.singleclick||{setup:function(){a(this).bind("click",a.event.special.singleclick.handler)},teardown:function(){a(this).unbind("click",a.event.special.singleclick.handler)},handler:function(b){var c=function(){var d=a(this),e=d.data("singleclick-timeout")||false;e&&clearTimeout(e);e=false;d.data("singleclick-timeout",e)};(function(d){var e=this;
c.call(e);var f=a(e);f.data("singleclick-clicks",(f.data("singleclick-clicks")||0)+1);var i=setTimeout(function(){var g=f.data("singleclick-clicks");c.apply(e,[d]);f.data("singleclick-clicks",0);if(g===1){d.type="singleclick";a.event.handle.apply(e,[d])}},500);f.data("singleclick-timeout",i)}).apply(this,[b])}}})(jQuery);
(function(a){a.fn.opacityFix=a.fn.opacityFix||function(){var b=a(this),c=b.css("background-color");if(c&&c!=="rgba(0, 0, 0, 0)")return this;for(var d=b;d.inDOM();){d=d.parent();if((c=d.css("background-color"))&&c!=="rgba(0, 0, 0, 0)"){b.css("background-color",c);break}}return this};a.fn.parentsAndSelf=a.fn.parentsAndSelf||function(b){return a(this).parents(b).andSelf().filter(b)};a.fn.findAndSelf=a.fn.findAndSelf||function(b){return a(this).find(b).andSelf().filter(b)};a.fn.firstInput=a.fn.firstInput||
function(){return a(this).findAndSelf(":input").filter(":first")};a.fn.choose=a.fn.choose||function(b){var c=a(this);if(typeof b==="undefined")b=c.val();else if(c.val()!==b)return this;switch(true){case this.is("option"):c.parents("select:first").choose(b);break;case c.is(":checkbox"):c.attr("checked",true);break;case c.is(":radio"):c.attr("checked",true);break;case c.is("select"):c.val(b);break;default:break}return this};a.fn.unchoose=a.fn.unchoose||function(){var b=a(this);switch(true){case b.is("option"):b.parents(":select:first").unchoose();
break;case b.is(":checkbox"):b.attr("checked",false);break;case b.is(":radio"):b.attr("checked",false);break;case b.is("select"):b.val(b.find("option:first").val());break;default:break}return this};a.fn.wouldSubmit=a.fn.wouldSubmit||function(){var b=a(this).findAndSelf(":input"),c=true;if(!b.length||!(b.attr("name")||0)||b.is(":radio,:checkbox")&&!b.is(":selected,:checked"))c=false;return c};a.fn.values=a.fn.values||function(){var b={};a(this).findAndSelf(":input").each(function(){var c=a(this),d=
c.attr("name")||null,e=c.val();if(!c.wouldSubmit())return true;if(d.indexOf("[]")!==-1){if(typeof b[d]==="undefined")b[d]=[];b[d].push(e)}else b[d]=e});return b};a.fn.submitForm=a.fn.submitForm||function(){var b=a(this);b.parentsAndSelf("form:first").trigger("submit");return b};a.fn.inDOM=a.fn.inDOM||function(){var b=a(this).parent().parent();return b.size()&&(b.height()||b.width())};a.fn.valWrap=a.fn.valWrap||function(b,c){var d=a(this);return d.val(d.val().wrap(b,c))};a.fn.valWrapSelection=a.fn.valWrapSelection||
function(b,c,d,e){var f=a(this),i=f.get(0);b=b||"";c=c||"";if(d||e)f.val(f.val().wrapSelection(b,c,d,e));else{d=i.selectionStart;e=i.selectionEnd;if(document.selection){i.focus();d=document.selection.createRange();d.text=b+d.text+c}else{var g=i.scrollTop;f.val(f.val().wrapSelection(b,c,d,e));i.focus();i.selectionStart=d+b.length;i.selectionEnd=e+b.length;i.scrollTop=g}}return f};a.fn.giveFocus=a.fn.giveFocus||function(){a(this).findAndSelf(":input:visible:first").focus();return this};a.fn.highlight=
a.fn.highlight||function(b){return a(this).effect("highlight",{},b||3E3)}})(jQuery);
(function(a){function b(d){var e;if(d&&d.constructor==Array&&d.length==3)return d;if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d))return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])];if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(d))return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55];if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))return[parseInt(e[1],16),parseInt(e[2],
16),parseInt(e[3],16)];if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d))return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(d))return c.transparent;return c[a.trim(d).toLowerCase()]}if(a.fx.step.backgroundColor)return true;a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(d,e){a.fx.step[e]=function(f){if(f.state==0){var i;i=f.elem;var g=e,h;do{h=a.curCSS(i,
g);if(h!=""&&h!="transparent"||a.nodeName(i,"body"))break;g="backgroundColor"}while(i=i.parentNode);i=b(h);f.start=i;f.end=b(f.end)}f.elem.style[e]="rgb("+[Math.max(Math.min(parseInt(f.pos*(f.end[0]-f.start[0])+f.start[0]),255),0),Math.max(Math.min(parseInt(f.pos*(f.end[1]-f.start[1])+f.start[1]),255),0),Math.max(Math.min(parseInt(f.pos*(f.end[2]-f.start[2])+f.start[2]),255),0)].join(",")+")"}});var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,
42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,
193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}})(jQuery);
(function(a){if(a.BalClass)window.console.warn("$.BalClass has already been defined...");else{a.BalClass=function(b,c){this.construct(b,c)};a.extend(a.BalClass.prototype,{config:{},construct:function(b,c){this.configure(b);a.extend(this,c||{});if(typeof this.built==="function")return this.built();return true},configure:function(b){this.config=this.config||{};this.config=a.extend({},this.config,b||{});return this},clone:function(b){var c=function(d){this.construct(d)};a.extend(true,c.prototype,this.prototype,
b||{});c.clone=this.prototype.clone;c.create=this.prototype.create;return c},create:function(b,c){return new this(b,c)},addConfig:function(b,c){if(typeof c==="undefined"){if(typeof b==="object")for(var d in b)this.applyConfig(d,b[d]);return false}else typeof c==="object"&&this.applyConfig(b,c);return this},applyConfig:function(b,c){this.config[b]=this.config[b]||{};a.extend(true,this.config[b],c||{});return this},setConfig:function(b,c){this.config[b]=c||{};return this},getConfig:function(b){if(typeof b!==
"string")return this.config;return this.getConfigWith(b)},getConfigWith:function(b,c){if(typeof b!=="string"){if(typeof c==="undefined")c=b;b="default"}if(typeof c!=="object")c={};var d={};a.extend(true,d,this.config[b]||{},c||{});return d},getConfigWithDefault:function(b,c){return this.getConfigWith("default",this.getConfigWith(b,c))},setDefaults:function(b){return this.applyConfig("default",b)}});a.BalClass.clone=a.BalClass.prototype.clone;a.BalClass.create=a.BalClass.prototype.create}})(jQuery);
(function(a){a.LightboxClass=function(){this.construct()};a.fn.lightbox=function(b){a.Lightbox=a.Lightbox||new a.LightboxClass;if(a.Lightbox.ie6&&!a.Lightbox.ie6_support)return this;b=a.extend({start:false,events:true},b);var c=a(this);if(b.events){c.unbind("click").click(function(){var d=a(this);d=c.index(d);if(!a.Lightbox.init(d,c))return false;if(!a.Lightbox.start())return false;return false});c.addClass("lightbox-enabled")}if(b.start){a(this);if(!a.Lightbox.init(0,c))return this;if(!a.Lightbox.start())return this}return this};
a.extend(a.LightboxClass.prototype,{images:[],constructed:false,compressed:null,src:null,baseurl:null,files:{compressed:{scripts:{lightbox:"scripts/jquery.lightbox.min.js",colorBlend:"scripts/jquery.color.min.js"},styles:{lightbox:"styles/jquery.lightbox.min.css"}},uncompressed:{scripts:{lightbox:"scripts/jquery.lightbox.js",colorBlend:"scripts/jquery.color.js"},styles:{lightbox:"styles/jquery.lightbox.css"}},images:{prev:"images/prev.gif",next:"images/next.gif",blank:"images/blank.gif",loading:"images/loading.gif"}},
text:{image:"Image",of:"of",close:"Close X",closeInfo:"You can also click anywhere outside the image to close.",download:"Download.",help:{close:"Click to close",interact:"Hover to interact"},about:{text:"jQuery Lightbox Plugin (balupton edition)",title:"Licenced under the GNU Affero General Public License.",link:"http://github.com/balupton/jquery-lightbox"}},keys:{close:"c",prev:"p",next:"n"},handlers:{show:null},opacity:0.9,padding:null,speed:400,rel:"lightbox",auto_relify:true,auto_scroll:"follow",
auto_resize:true,ie6:null,ie6_support:true,colorBlend:null,download_link:true,show_helper_text:true,show_linkback:true,show_info:"auto",show_extended_info:"auto",options:["show_helper_text","auto_scroll","auto_resize","download_link","show_info","show_extended_info","ie6_support","colorBlend","baseurl","files","text","show_linkback","keys","opacity","padding","speed","rel","auto_relify"],construct:function(b){var c=typeof this.constructed==="undefined"||this.constructed===false;this.constructed=true;
var d=c;b=b||{};var e=function(g,h){if(typeof g==="object")for(var j in g)g[j]=e(g[j],h);else if(typeof h==="array"){j=0;for(var k=g.length;j<k;++j)g[j]=e(g[j],h)}else g=h+g;return g};if(c&&typeof b.files==="undefined"){this.compressed=null;var f=a("script[src*="+this.files.compressed.scripts.lightbox+"]:first");if(f.length!==0){a.extend(true,this.files,this.files.compressed);this.compressed=true}else{f=a("script[src*="+this.files.uncompressed.scripts.lightbox+"]:first");if(f.length!==0){a.extend(true,
this.files,this.files.uncompressed);this.compressed=false}}if(this.compressed===null){window.console.error("Lightbox was not able to find it's javascript script tag necessary for auto-inclusion.");d=false}else{this.src=f.attr("src");this.baseurl=this.src.substring(0,this.src.indexOf(this.files.scripts.lightbox));this.files=e(this.files,this.baseurl);b=a.extend(b,a.params_to_json(this.src))}this.images.image={src:"",title:"Untitled",description:"",name:"",color:null,width:null,height:null,id:null,
image:true};this.images.prepare=function(g){var h=a.extend({},this.image);if(g.tagName){g=a(g);if(g.attr("src")||g.attr("href")){h.src=g.attr("src")||g.attr("href");h.title=g.attr("title")||g.attr("alt")||h.title;h.name=g.attr("name")||"";h.color=g.css("backgroundColor");g=h.title.indexOf(": ");if(g>0){h.description=h.title.substring(g+2)||h.description;h.title=h.title.substring(0,g)||h.title}}else h=null}else h=g.src?a.extend(this.image,g):null;if(h)h.id=h.id||h.src+h.title+h.description;return h};
this.images.create=function(g){var h=this;if(g.each)g.each(function(k,l){h.create(l)});else{var j=h.prepare(g);j?h.push(j):window.console.error("We dont know what we have:",g,j);return h}}}else if(typeof b.files==="object")b.files=e(b.files,this.baseurl);else d=false;for(var i in this.options){f=this.options[i];if(typeof b[f]==="object"&&typeof this[f]==="object")this[f]=a.extend(true,this[f],b[f]);else if(typeof b[f]!=="undefined")this[f]=b[f]}delete i;this.ie6=c&&navigator.userAgent.indexOf("MSIE 6")>=
0?true:false;if(d||typeof b.download_link!=="undefined"||typeof b.colorBlend!=="undefined"||typeof b.files==="object"||typeof b.text==="object"||typeof b.show_linkback!=="undefined"||typeof b.scroll_with!=="undefined")a(function(){a.Lightbox.domReady()});return true},domReady:function(){var b=document.getElementsByTagName(a.browser.safari?"head":"body")[0],c=this.files.styles,d=this.files.scripts;if(this.colorBlend===true&&typeof a.colorBlend==="undefined")this.colorBlend=true;else{this.colorBlend=
typeof a.colorBlend!=="undefined";delete d.colorBlend}for(stylesheet in c){var e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.media="screen";e.href=c[stylesheet];e.id="lightbox-stylesheet-"+stylesheet.replace(/[^a-zA-Z0-9]/g,"");a("#"+e.id).remove();b.appendChild(e)}for(script in d){e=document.createElement("script");e.type="text/javascript";e.src=d[script];e.id="lightbox-script-"+script.replace(/[^a-zA-Z0-9]/g,"");a("#"+e.id).remove();b.appendChild(e)}delete d;delete c;delete b;
a("#lightbox,#lightbox-overlay").remove();a("body").append('<div id="lightbox-overlay"><div id="lightbox-overlay-text">'+(this.show_linkback?'<p><span id="lightbox-overlay-text-about"><a href="#" title="'+this.text.about.title+'">'+this.text.about.text+"</a></span></p><p>&nbsp;</p>":"")+(this.show_helper_text?'<p><span id="lightbox-overlay-text-close">'+this.text.help.close+'</span><br/>&nbsp;<span id="lightbox-overlay-text-interact">'+this.text.help.interact+"</span></p>":"")+'</div></div><div id="lightbox"><div id="lightbox-imageBox"><div id="lightbox-imageContainer"><img id="lightbox-image" /><div id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+
this.files.images.loading+'" /></a></div></div></div><div id="lightbox-infoBox"><div id="lightbox-infoContainer"><div id="lightbox-infoHeader"><span id="lightbox-caption">'+(this.download_link?'<a href="#" title="'+this.text.download+'" id="lightbox-caption-title"></a>':'<span id="lightbox-caption-title"></span>')+'<span id="lightbox-caption-seperator"></span><span id="lightbox-caption-description"></span></span></div><div id="lightbox-infoFooter"><span id="lightbox-currentNumber"></span><span id="lightbox-close"><a href="#" id="lightbox-close-button" title="'+
this.text.closeInfo+'">'+this.text.close+'</a></span></div><div id="lightbox-infoContainer-clear"></div></div></div></div>');this.resizeBoxes();this.repositionBoxes();a("#lightbox,#lightbox-overlay,#lightbox-overlay-text-interact").hide();this.ie6&&this.ie6_support&&a("#lightbox-overlay").css({position:"absolute",top:"0px",left:"0px"});a.each(this.files.images,function(){var f=new Image;f.onload=function(){f=f.onload=null};f.src=this});a(window).unbind("resize").resize(function(){a.Lightbox.resizeBoxes("resized")});
this.scroll==="follow"&&a(window).scroll(function(){a.Lightbox.repositionBoxes()});a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+a.Lightbox.files.images.prev+") left 45% no-repeat"})},function(){a(this).css({background:"transparent url("+a.Lightbox.files.images.blank+") no-repeat"})}).click(function(){a.Lightbox.images.prev();a.Lightbox.showImage();return false});a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+a.Lightbox.files.images.next+
") right 45% no-repeat"})},function(){a(this).css({background:"transparent url("+a.Lightbox.files.images.blank+") no-repeat"})}).click(function(){a.Lightbox.images.next();a.Lightbox.showImage();return false});this.show_linkback&&a("#lightbox-overlay-text-about a").click(function(){window.open(a.Lightbox.text.about.link);return false});a("#lightbox-overlay-text-close").unbind().hover(function(){a("#lightbox-overlay-text-interact").fadeIn()},function(){a("#lightbox-overlay-text-interact").fadeOut()});
this.download_link&&a("#lightbox-caption-title").click(function(){window.open(a(this).attr("href"));return false});a("#lightbox-overlay, #lightbox, #lightbox-loading-link, #lightbox-btnClose").unbind().click(function(){a.Lightbox.finish();return false});this.auto_relify&&this.relify();return true},relify:function(){var b={},c=0,d=this.rel;a.each(a("[rel*="+d+"]"),function(e,f){var i=a(f).attr("rel");if(i===d)i=c;if(typeof b[i]==="undefined"){b[i]=[];c++}b[i].push(f)});a.each(b,function(e,f){a(f).lightbox()});
return true},init:function(b,c){if(typeof c==="undefined"){c=b;b=0}this.images.clear();this.images.create(c);if(this.images.isEmpty()){window.console.warn("WARNING","Lightbox started, but no images: ",b,c);return false}if(!this.images.current(b)){window.console.warn("WARNING","Could not find current image: ",b,this.images);return false}return true},start:function(){this.visible=true;this.scroll==="disable"&&a(document.body).css("overflow","hidden");a("embed, object, select").css("visibility","hidden");
this.resizeBoxes("general");this.repositionBoxes({speed:0});a("#lightbox-infoFooter").hide();a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-infoBox").hide();a("#lightbox-overlay").css("opacity",this.opacity).fadeIn(400,function(){a("#lightbox").fadeIn(300);if(!a.Lightbox.showImage()){a.Lightbox.finish();return false}});return true},finish:function(){a("#lightbox").hide();a("#lightbox-overlay").fadeOut(function(){a("#lightbox-overlay").hide()});a("embed, object, select").css({visibility:"visible"});
this.images.reset();this.scroll==="disable"&&a(document.body).css("overflow","visible");this.visible=false},resizeBoxes:function(b){if(b!=="transition"){var c=a(this.ie6?document.body:document);a("#lightbox-overlay").css({width:c.width(),height:c.height()});delete c}switch(b){case "general":return true;case "resized":if(this.auto_resize===false){this.repositionBoxes({nHeight:g,speed:this.speed});return true}case "transition":default:break}var d=this.images.current();if(!d||!d.width||!this.visible)return false;
c=d.width;d=d.height;g=a(window).width();var e=a(window).height();if(this.auto_resize!==false){g=Math.floor(g*0.8);e=Math.floor(e*0.8);for(var f;c>g||d>e;){if(c>g){f=g/c;c=g;d=Math.floor(d*f)}if(d>e){f=e/d;d=e;c=Math.floor(c*f)}}}var i=a("#lightbox-imageBox").width();f=a("#lightbox-imageBox").height();e=c+this.padding*2;var g=d+this.padding*2;i=i-e;f=f-g;a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css("height",g);a("#lightbox-infoBox").css("width",e);if(b==="transition")if(i===0&&f===0){this.pause(this.speed/
3);this.showImage(null,3)}else{a("#lightbox-image").width(c).height(d);a("#lightbox-imageBox").animate({width:e,height:g},this.speed,function(){a.Lightbox.showImage(null,3)})}else{a("#lightbox-image").animate({width:c,height:d},this.speed);a("#lightbox-imageBox").animate({width:e,height:g},this.speed)}this.repositionBoxes({nHeight:g,speed:this.speed});return true},repositioning:false,reposition_failsafe:false,repositionBoxes:function(b){if(this.repositioning){this.reposition_failsafe=true;return null}this.repositioning=
true;b=a.extend({},b);b.callback=b.callback||null;b.speed=b.speed||"slow";var c=this.getPageScroll(),d=b.nHeight||parseInt(a("#lightbox").height(),10);d=c.yScroll+(a(window).height()-d)/2.5;c={left:c.xScroll,top:d};if(b.speed)a("#lightbox").animate(c,"slow",function(){if(a.Lightbox.reposition_failsafe){a.Lightbox.repositioning=a.Lightbox.reposition_failsafe=false;a.Lightbox.repositionBoxes(b)}else{a.Lightbox.repositioning=false;b.callback&&b.callback()}});else{a("#lightbox").css(c);if(this.reposition_failsafe){this.repositioning=
this.reposition_failsafe=false;this.repositionBoxes(b)}else this.repositioning=false}return true},visible:false,showImage:function(b,c){c=c||1;if(b=this.images.current(b)||this.images.get("first",true)){switch(c){case 1:this.KeyboardNav_Disable();a("#lightbox-loading").show();a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-infoBox").hide();a("#lightbox-imageBox").unbind();if(b.width&&b.height)this.showImage(null,2);else{var d=new Image;d.onload=function(){b.width=
d.width;b.height=d.height;a.Lightbox.showImage(null,2);d=d.onload=null};d.src=b.src}break;case 2:a("#lightbox-image").attr("src",b.src);if(typeof this.padding==="undefined"||this.padding===null||isNaN(this.padding))this.padding=parseInt(a("#lightbox-imageContainer").css("padding-left"),10)||parseInt(a("#lightbox-imageContainer").css("padding"),10)||0;if(this.colorBlend){a("#lightbox-overlay").animate({backgroundColor:b.color},this.speed*2);a("#lightbox-imageBox").css("borderColor",b.color)}this.resizeBoxes("transition");
break;case 3:a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(this.speed*1.5,function(){a.Lightbox.showImage(null,4)});this.preloadNeighbours();this.handlers.show!==null&&this.handlers.show(b);break;case 4:var e=a("#lightbox-caption-title").html(b.title||"Untitled");if(this.download_link)e.attr("href",this.download_link?b.src:"");delete e;a("#lightbox-caption-seperator").html(b.description?": ":"");a("#lightbox-caption-description").html(b.description||"&nbsp;");this.images.length>1?a("#lightbox-currentNumber").html(this.text.image+
"&nbsp;"+(this.images.index+1)+"&nbsp;"+this.text.of+"&nbsp;"+this.images.length):a("#lightbox-currentNumber").html("&nbsp;");a("#lightbox-imageBox").unbind("mouseover").mouseover(function(){a("#lightbox-infoBox:not(:visible)").stop().slideDown("fast")});a("#lightbox-infoBox").unbind("mouseover").mouseover(function(){a("#lightbox-infoFooter:not(:visible)").stop().slideDown("fast")});if(this.show_extended_info===true){a("#lightbox-imageBox").trigger("mouseover");a("#lightbox-infoBox").trigger("mouseover")}else this.show_info===
true&&a("#lightbox-imageBox").trigger("mouseover");a("#lightbox-nav-btnPrev, #lightbox-nav-btnNext").css({background:"transparent url("+this.files.images.blank+") no-repeat"});this.images.isFirst()||a("#lightbox-nav-btnPrev").show();this.images.isLast()||a("#lightbox-nav-btnNext").show();a("#lightbox-nav").show();this.KeyboardNav_Enable();break;default:window.console.error("Don't know what to do: ",b,c);return this.showImage(b,1)}return true}},preloadNeighbours:function(){if(this.images.isSingle()||
this.images.isEmpty())return true;var b=this.images.current(),c=this.images.index;if(!b)return b;var d=this.images.prev();if(d){b=new Image;b.src=d.src}this.images.setIndex(c);if(d=this.images.next()){b=new Image;b.src=d.src}this.images.setIndex(c)},KeyboardNav_Enable:function(){a(document).keydown(function(b){a.Lightbox.KeyboardNav_Action(b)})},KeyboardNav_Disable:function(){a(document).unbind("keydown")},KeyboardNav_Action:function(b){b=b||window.event;var c=b.keyCode;b=b.DOM_VK_ESCAPE||27;var d=
String.fromCharCode(c).toLowerCase();if(d===this.keys.close||c===b)return a.Lightbox.finish();if(d===this.keys.prev||c===37)return a.Lightbox.showImage(a.Lightbox.images.prev());if(d===this.keys.next||c===39)return a.Lightbox.showImage(a.Lightbox.images.next());return true},getPageScroll:function(){var b,c;if(self.pageYOffset){c=self.pageYOffset;b=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){c=document.documentElement.scrollTop;b=document.documentElement.scrollLeft}else if(document.body){c=
document.body.scrollTop;b=document.body.scrollLeft}return{xScroll:b,yScroll:c}},pause:function(b){var c=new Date,d=null;do d=new Date;while(d-c<b)}});if(typeof a.Lightbox==="undefined")a.Lightbox=new a.LightboxClass})(jQuery);
